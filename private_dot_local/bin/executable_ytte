#!/bin/sh

set -Eeuo pipefail

if [ ! -d "$YTT_HOME" ]
then
    gh repo clone "$YTT_REPO" "$YTT_HOME"
fi

cd "$YTT_HOME"

gh sync

nvim tasks

if [ -n "$(git status -s)" ]
then
    git add .
    git commit -m "feat: update tasks $(date)"
    gh sync
else
    echo 'Tasks unchanged'
fi
