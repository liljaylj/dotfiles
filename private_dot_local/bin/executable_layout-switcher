#!/bin/sh

obj=$(swaymsg -t get_inputs | jq -c '.[] | select(.type == "keyboard")' | head -1)

idx="$(jq '.xkb_active_layout_index' <<<"$obj")"
sum="$(jq '.xkb_layout_names | length' <<<"$obj")"

newidx="$(( ("$idx" + 1) % "$sum" ))"

swaymsg input 'type:keyboard' xkb_switch_layout "$newidx"
